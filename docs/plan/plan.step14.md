# Step 14: ê´€ë¦¬ì ëª¨ë“œ (Admin Mode) - ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ëª…ì„¸ì„œ

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë¬¸ì„œ ë²„ì „** | 1.0.0 |
| **ì‘ì„±ì¼** | 2026-01-06 |
| **ìƒíƒœ** | ì„¤ê³„ ì¤‘ |
| **ì‘ì„±ì** | Claude Code |

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ì¼ì | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|----------|
| 0.1.0 | 2026-01-06 | Claude Code | ì´ˆì•ˆ ì‘ì„± |
| 1.0.0 | 2026-01-06 | Claude Code | í‰ê°€ ê¸°ë°˜ ì „ë©´ ê°œì„  - IDì²´ê³„, ìˆ˜ìš©ê¸°ì¤€, ë¦¬ìŠ¤í¬ë¶„ì„ ì¶”ê°€ |

---

## 1. ì„œë¡ 

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” DocLight í”„ë¡œì íŠ¸ì˜ ê´€ë¦¬ì ëª¨ë“œ(Admin Mode) ê¸°ëŠ¥ì— ëŒ€í•œ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ëª…ì„¸ì„œ(SDS)ì´ë‹¤. ì›¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ íŒŒì¼/í´ë”ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì˜ ì„¤ê³„ë¥¼ ì •ì˜í•œë‹¤.

### 1.2 ë²”ìœ„

#### 1.2.1 í¬í•¨ ë²”ìœ„

- ë‹¤ì¤‘ API í‚¤ ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
- ê´€ë¦¬ì ì „ìš© ì›¹ ì¸í„°í˜ì´ìŠ¤ (`/admin/*`)
- íŒŒì¼/í´ë” CRUD ì‘ì—… (ìƒì„±, ì½ê¸°, ìˆ˜ì •, ì‚­ì œ)
- ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ë°˜ íŒŒì¼ ì´ë™
- ë‹¤ì¤‘ íŒŒì¼ ì„ íƒ ë° ì¼ê´„ ì‘ì—…
- ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì¸ë¼ì¸ í¸ì§‘

#### 1.2.2 ì œì™¸ ë²”ìœ„

- ì‚¬ìš©ì ê³„ì • ê´€ë¦¬ (ê°œë³„ ì‚¬ìš©ì ë“±ë¡/ì‚­ì œ)
- íŒŒì¼ ë²„ì „ ê´€ë¦¬ (Git ì—°ë™)
- ì‹¤ì‹œê°„ í˜‘ì—… í¸ì§‘
- íŒŒì¼ ì•”í˜¸í™”

### 1.3 ìš©ì–´ ì •ì˜

| ìš©ì–´ | ì •ì˜ |
|------|------|
| **Admin Mode** | API í‚¤ ì¸ì¦ì„ í†µí•´ ì ‘ê·¼í•˜ëŠ” ê´€ë¦¬ì ì „ìš© ëª¨ë“œ |
| **Session** | ì¸ì¦ í›„ ìƒì„±ë˜ëŠ” ì„œë²„ ì¸¡ ì„¸ì…˜ ê°ì²´ (í† í° ê¸°ë°˜) |
| **Permission** | ì‚¬ìš©ìì—ê²Œ ë¶€ì—¬ëœ ê¶Œí•œ (read, write, delete) |
| **Context Menu** | ìš°í´ë¦­ ì‹œ í‘œì‹œë˜ëŠ” ì‘ì—… ë©”ë‰´ |
| **Dirty State** | í¸ì§‘ ì¤‘ ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆëŠ” ìƒíƒœ |
| **File Tree** | ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì˜ ê³„ì¸µì  íŒŒì¼/í´ë” ëª©ë¡ |

### 1.4 ì•½ì–´

| ì•½ì–´ | ì „ì²´ ëª…ì¹­ |
|------|----------|
| API | Application Programming Interface |
| CRUD | Create, Read, Update, Delete |
| SDS | Software Design Specification |
| UI | User Interface |
| UX | User Experience |

### 1.5 ì°¸ì¡° ë¬¸ì„œ

| ë¬¸ì„œ | ì„¤ëª… |
|------|------|
| `CLAUDE.md` | í”„ë¡œì íŠ¸ ì½”ë”© ê°€ì´ë“œë¼ì¸ |
| `docs/api/api.md` | ê¸°ì¡´ API ëª…ì„¸ì„œ |
| `config.example.json5` | ì„¤ì • íŒŒì¼ ìŠ¤í‚¤ë§ˆ |
| `src/utils/path-validator.js` | ê²½ë¡œ ê²€ì¦ ìœ í‹¸ë¦¬í‹° |

---

## 2. ìš”êµ¬ì‚¬í•­ ì •ì˜

### 2.1 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 2.1.1 ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-AUTH-001 | ë‹¤ì¤‘ API í‚¤ ì§€ì› | P0 | config.json5ì—ì„œ apiKeys ë°°ì—´ë¡œ ë³µìˆ˜ í‚¤ ì„¤ì • ê°€ëŠ¥ |
| REQ-AUTH-002 | API í‚¤ ì¸ì¦ | P0 | ì˜¬ë°”ë¥¸ í‚¤ ì…ë ¥ ì‹œ ì„¸ì…˜ í† í° ë°œê¸‰, ì˜ëª»ëœ í‚¤ ì‹œ 401 ë°˜í™˜ |
| REQ-AUTH-003 | ì„¸ì…˜ ë§Œë£Œ ì²˜ë¦¬ | P0 | ì„¤ì •ëœ íƒ€ì„ì•„ì›ƒ(ê¸°ë³¸ 3600000ms) í›„ ì„¸ì…˜ ë¬´íš¨í™” |
| REQ-AUTH-004 | ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ | P1 | read/write/delete ê¶Œí•œë³„ API ì ‘ê·¼ ì œí•œ |
| REQ-AUTH-005 | ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ | P1 | ì„¸ì…˜ ì¦‰ì‹œ ë¬´íš¨í™” ë° ì¿ í‚¤ ì‚­ì œ |

#### 2.1.2 íŒŒì¼ íŠ¸ë¦¬ í‘œì‹œ

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-TREE-001 | ëª¨ë“  íŒŒì¼ íƒ€ì… í‘œì‹œ | P0 | .md ì™¸ ëª¨ë“  íŒŒì¼ í™•ì¥ì íŠ¸ë¦¬ì— í‘œì‹œ |
| REQ-TREE-002 | íŒŒì¼ íƒ€ì…ë³„ ì•„ì´ì½˜ | P2 | í™•ì¥ìë³„ êµ¬ë¶„ ê°€ëŠ¥í•œ ì•„ì´ì½˜ í‘œì‹œ |
| REQ-TREE-003 | íŒŒì¼ ë©”íƒ€ì •ë³´ í‘œì‹œ | P2 | íŒŒì¼ í¬ê¸°, ìˆ˜ì •ì¼ì‹œ í‘œì‹œ ê°€ëŠ¥ |

#### 2.1.3 íŒŒì¼ ì„ íƒ

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-SEL-001 | ë‹¨ì¼ ì„ íƒ | P0 | í´ë¦­ìœ¼ë¡œ ë‹¨ì¼ íŒŒì¼/í´ë” ì„ íƒ |
| REQ-SEL-002 | ë‹¤ì¤‘ ì„ íƒ (Shift) | P0 | Shift+í´ë¦­ìœ¼ë¡œ ë²”ìœ„ ì„ íƒ |
| REQ-SEL-003 | ë‹¤ì¤‘ ì„ íƒ (Ctrl) | P1 | Ctrl+í´ë¦­ìœ¼ë¡œ ê°œë³„ í† ê¸€ ì„ íƒ |
| REQ-SEL-004 | ì „ì²´ ì„ íƒ | P2 | Ctrl+Aë¡œ í˜„ì¬ í´ë” ë‚´ ì „ì²´ ì„ íƒ |

#### 2.1.4 ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-CTX-001 | ìš°í´ë¦­ ë©”ë‰´ í‘œì‹œ | P0 | íŒŒì¼/í´ë” ìš°í´ë¦­ ì‹œ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ í‘œì‹œ |
| REQ-CTX-002 | Edit ë©”ë‰´ (íŒŒì¼ ì „ìš©) | P0 | í¸ì§‘ ê°€ëŠ¥ íŒŒì¼ì—ë§Œ Edit ë©”ë‰´ í‘œì‹œ |
| REQ-CTX-003 | Rename ë©”ë‰´ | P0 | ëª¨ë“  íŒŒì¼/í´ë”ì— Rename ë©”ë‰´ í‘œì‹œ |
| REQ-CTX-004 | Delete ë©”ë‰´ | P0 | ëª¨ë“  íŒŒì¼/í´ë”ì— Delete ë©”ë‰´ í‘œì‹œ |
| REQ-CTX-005 | Cut/Copy/Paste ë©”ë‰´ | P1 | í´ë¦½ë³´ë“œ ì‘ì—… ë©”ë‰´ í‘œì‹œ |
| REQ-CTX-006 | New File/Folder ë©”ë‰´ | P1 | í´ë” ì»¨í…ìŠ¤íŠ¸ì—ì„œ ìƒì„± ë©”ë‰´ í‘œì‹œ |

#### 2.1.5 íŒŒì¼ í¸ì§‘

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-EDIT-001 | ì›ë³¸ ë‚´ìš© ë¡œë“œ | P0 | íŒŒì¼ ì„ íƒ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ í‘œì‹œ |
| REQ-EDIT-002 | ì¸ë¼ì¸ í¸ì§‘ | P0 | í…ìŠ¤íŠ¸ ì—ë””í„°ì—ì„œ ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥ |
| REQ-EDIT-003 | ì €ì¥ ê¸°ëŠ¥ | P0 | Save ë²„íŠ¼ ë˜ëŠ” Ctrl+Së¡œ ì €ì¥ |
| REQ-EDIT-004 | ë¯¸ë¦¬ë³´ê¸°/í¸ì§‘ ì „í™˜ | P0 | í† ê¸€ ë²„íŠ¼ìœ¼ë¡œ ëª¨ë“œ ì „í™˜ |
| REQ-EDIT-005 | ë³€ê²½ì‚¬í•­ ê°ì§€ | P0 | ìˆ˜ì • ì‹œ isDirty ìƒíƒœ í‘œì‹œ |
| REQ-EDIT-006 | ì €ì¥ ì•ˆí•¨ ê²½ê³  | P0 | íŒŒì¼ ì „í™˜ ì‹œ ë¯¸ì €ì¥ ê²½ê³  ëª¨ë‹¬ í‘œì‹œ |

#### 2.1.6 íŒŒì¼ ì¡°ì‘

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-FILE-001 | ì´ë¦„ ë³€ê²½ | P0 | ëª¨ë‹¬ì„ í†µí•œ íŒŒì¼/í´ë”ëª… ë³€ê²½ |
| REQ-FILE-002 | ì‚­ì œ | P0 | í™•ì¸ í›„ íŒŒì¼/í´ë” ì‚­ì œ |
| REQ-FILE-003 | ë‹¤ì¤‘ ì‚­ì œ | P1 | ì„ íƒëœ ì—¬ëŸ¬ í•­ëª© ì¼ê´„ ì‚­ì œ |
| REQ-FILE-004 | íŒŒì¼ ìƒì„± | P1 | ìƒˆ íŒŒì¼ ìƒì„± (ì´ˆê¸° ë‚´ìš© ì…ë ¥ ê°€ëŠ¥) |
| REQ-FILE-005 | í´ë” ìƒì„± | P1 | ìƒˆ í´ë” ìƒì„± |

#### 2.1.7 ë“œë˜ê·¸ì•¤ë“œë¡­

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-DND-001 | íŒŒì¼ ë“œë˜ê·¸ | P0 | íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ë‹¤ë¥¸ í´ë”ë¡œ ì´ë™ |
| REQ-DND-002 | í´ë” ë“œë˜ê·¸ | P0 | í´ë”ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ë‹¤ë¥¸ í´ë” í•˜ìœ„ë¡œ ì´ë™ |
| REQ-DND-003 | ë¶€ëª¨ë¡œ ì´ë™ | P0 | íŠ¸ë¦¬ ìµœìƒë‹¨ìœ¼ë¡œ ë“œë˜ê·¸ ì‹œ ë¶€ëª¨ í´ë”ë¡œ ì´ë™ |
| REQ-DND-004 | ë“œë¡­ ì˜ì—­ í‘œì‹œ | P1 | ë“œë˜ê·¸ ì¤‘ ìœ íš¨í•œ ë“œë¡­ ì˜ì—­ í•˜ì´ë¼ì´íŠ¸ |
| REQ-DND-005 | ìê¸° í•˜ìœ„ ì´ë™ ë°©ì§€ | P0 | í´ë”ë¥¼ ìì‹ ì˜ í•˜ìœ„ í´ë”ë¡œ ì´ë™ ì‹œë„ ì‹œ ì°¨ë‹¨ |

#### 2.1.8 URL ë¼ìš°íŒ…

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ | ìˆ˜ìš© ê¸°ì¤€ |
|----|----------|----------|----------|
| REQ-URL-001 | /admin ì§„ì…ì  | P0 | /admin ì ‘ê·¼ ì‹œ ì¸ì¦ ëª¨ë‹¬ í‘œì‹œ |
| REQ-URL-002 | /admin/* ê²½ë¡œ | P0 | /admin/path í˜•ì‹ìœ¼ë¡œ íŒŒì¼ ì ‘ê·¼ |
| REQ-URL-003 | URL ìƒíƒœ ë°˜ì˜ | P1 | ë¸Œë¼ìš°ì € URLê³¼ í˜„ì¬ ë³´ê¸° íŒŒì¼ ë™ê¸°í™” |

### 2.2 ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

| ID | í•­ëª© | ìš”êµ¬ì‚¬í•­ | ìˆ˜ìš© ê¸°ì¤€ |
|----|------|----------|----------|
| NFR-PERF-001 | ì‘ë‹µ ì‹œê°„ | API ì‘ë‹µ | 95% ìš”ì²­ì´ 500ms ì´ë‚´ ì‘ë‹µ |
| NFR-PERF-002 | íŒŒì¼ íŠ¸ë¦¬ ë¡œë“œ | ì´ˆê¸° ë¡œë”© | 1000ê°œ íŒŒì¼ ê¸°ì¤€ 2ì´ˆ ì´ë‚´ |
| NFR-SEC-001 | ì„¸ì…˜ ë³´ì•ˆ | í† í° ìƒì„± | crypto.randomBytes(32) ì‚¬ìš© |
| NFR-SEC-002 | ê²½ë¡œ ê²€ì¦ | ê²½ë¡œ ì¡°ì‘ ë°©ì§€ | path-validator.jsë¡œ ëª¨ë“  ê²½ë¡œ ê²€ì¦ |
| NFR-SEC-003 | XSS ë°©ì§€ | ì…ë ¥ ê²€ì¦ | íŒŒì¼ëª…ì— íŠ¹ìˆ˜ë¬¸ì ì œí•œ |
| NFR-COMPAT-001 | ë¸Œë¼ìš°ì € | í˜¸í™˜ì„± | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| NFR-COMPAT-002 | í•˜ìœ„ í˜¸í™˜ | ì„¤ì • íŒŒì¼ | ê¸°ì¡´ ë‹¨ì¼ apiKey ì„¤ì • ê³„ì† ì§€ì› |

---

## 3. ì‹œìŠ¤í…œ ì„¤ê³„

### 3.1 ì„¤ì • íŒŒì¼ ë³€ê²½

#### 3.1.1 config.json5 ìŠ¤í‚¤ë§ˆ í™•ì¥

```json5
{
  // ê¸°ì¡´ ë‹¨ì¼ í‚¤ (í•˜ìœ„ í˜¸í™˜) - REQ-AUTH-001
  apiKey: "single-key",

  // ë˜ëŠ” ë‹¤ì¤‘ í‚¤ (ì‹ ê·œ) - REQ-AUTH-001
  apiKeys: [
    { key: "admin-key-1", name: "Admin 1", permissions: ["read", "write", "delete"] },
    { key: "admin-key-2", name: "Editor", permissions: ["read", "write"] }
  ],

  // ê´€ë¦¬ì ì„¤ì • - REQ-AUTH-003, REQ-AUTH-004
  admin: {
    sessionTimeout: 3600000,      // ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ms), ê¸°ë³¸ 1ì‹œê°„
    allowUpload: true,            // ì—…ë¡œë“œ í—ˆìš©
    allowDelete: true,            // ì‚­ì œ í—ˆìš©
    maxUploadSize: 10,            // ìµœëŒ€ ì—…ë¡œë“œ í¬ê¸° (MB)
    editableExtensions: [".md", ".txt", ".json", ".json5", ".yaml", ".yml"]
  }
}
```

#### 3.1.2 í•˜ìœ„ í˜¸í™˜ì„± ì²˜ë¦¬ (NFR-COMPAT-002)

```javascript
// config-loader.js ìˆ˜ì •
function normalizeApiKeys(config) {
  if (config.apiKey && !config.apiKeys) {
    config.apiKeys = [
      { key: config.apiKey, name: "Default Admin", permissions: ["read", "write", "delete"] }
    ];
  }
  return config;
}
```

### 3.2 ë°±ì—”ë“œ API ì„¤ê³„

#### 3.2.1 API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

| ID | Method | Endpoint | ì„¤ëª… | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì¸ì¦ |
|----|--------|----------|------|--------------|------|
| API-001 | POST | /api/admin/auth | API í‚¤ ì¸ì¦ | REQ-AUTH-002 | X |
| API-002 | POST | /api/admin/logout | ë¡œê·¸ì•„ì›ƒ | REQ-AUTH-005 | O |
| API-003 | GET | /api/admin/session | ì„¸ì…˜ í™•ì¸ | REQ-AUTH-003 | O |
| API-004 | GET | /api/admin/tree | ì „ì²´ íŒŒì¼ íŠ¸ë¦¬ | REQ-TREE-001 | O |
| API-005 | GET | /api/admin/content | íŒŒì¼ ì›ë³¸ ë‚´ìš© | REQ-EDIT-001 | O |
| API-006 | PUT | /api/admin/content | íŒŒì¼ ì €ì¥ | REQ-EDIT-003 | O |
| API-007 | POST | /api/admin/create | íŒŒì¼/í´ë” ìƒì„± | REQ-FILE-004, REQ-FILE-005 | O |
| API-008 | PUT | /api/admin/rename | ì´ë¦„ ë³€ê²½ | REQ-FILE-001 | O |
| API-009 | PUT | /api/admin/move | íŒŒì¼/í´ë” ì´ë™ | REQ-DND-001, REQ-DND-002 | O |
| API-010 | DELETE | /api/admin/entry | íŒŒì¼/í´ë” ì‚­ì œ | REQ-FILE-002, REQ-FILE-003 | O |
| API-011 | POST | /api/admin/upload | íŒŒì¼ ì—…ë¡œë“œ | - | O |

#### 3.2.2 API ìƒì„¸ ëª…ì„¸

##### API-001: POST /api/admin/auth

ì¸ì¦ ë° ì„¸ì…˜ ìƒì„±

**Request:**
```json
{
  "apiKey": "admin-key-1"
}
```

**Response (ì„±ê³µ - 200):**
```json
{
  "success": true,
  "session": {
    "token": "a1b2c3d4e5f6...",
    "name": "Admin 1",
    "permissions": ["read", "write", "delete"],
    "expiresAt": 1704520800000
  }
}
```

**Response (ì‹¤íŒ¨ - 401):**
```json
{
  "success": false,
  "error": { "code": "INVALID_KEY", "message": "Invalid API key" }
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] ìœ íš¨í•œ API í‚¤ë¡œ 200 ì‘ë‹µ ë° ì„¸ì…˜ í† í° ë°œê¸‰
- [ ] ë¬´íš¨í•œ API í‚¤ë¡œ 401 ì‘ë‹µ
- [ ] ë¹ˆ API í‚¤ë¡œ 400 ì‘ë‹µ
- [ ] ì„¸ì…˜ í† í°ì´ 64ì hex ë¬¸ìì—´

##### API-004: GET /api/admin/tree

ëª¨ë“  íŒŒì¼ íƒ€ì…ì„ í¬í•¨í•œ íŠ¸ë¦¬ ë°˜í™˜

**Query Parameters:**
- `path`: ì‹œì‘ ê²½ë¡œ (ê¸°ë³¸: `/`)

**Response (200):**
```json
{
  "success": true,
  "tree": [
    {
      "name": "guide",
      "path": "/guide",
      "type": "directory",
      "children": [
        {
          "name": "intro.md",
          "path": "/guide/intro.md",
          "type": "file",
          "extension": ".md",
          "size": 1234,
          "modifiedAt": "2026-01-06T10:00:00Z"
        }
      ]
    }
  ]
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] ëª¨ë“  íŒŒì¼ íƒ€ì… ë°˜í™˜ (.md, .png, .json ë“±)
- [ ] ìˆ¨ê¹€ íŒŒì¼(.) ì œì™¸
- [ ] excludes íŒ¨í„´ ì ìš©
- [ ] íŒŒì¼ í¬ê¸°, ìˆ˜ì •ì¼ì‹œ í¬í•¨

##### API-005: GET /api/admin/content

íŒŒì¼ ì›ë³¸ ë‚´ìš© ì¡°íšŒ

**Query Parameters:**
- `path`: íŒŒì¼ ê²½ë¡œ (í•„ìˆ˜)

**Response (200):**
```json
{
  "success": true,
  "path": "/guide/intro.md",
  "content": "---\ntitle: Introduction\n---\n\n# Hello",
  "encoding": "utf-8",
  "size": 1234,
  "modifiedAt": "2026-01-06T10:00:00Z"
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] ì›ë³¸ ë‚´ìš© ê·¸ëŒ€ë¡œ ë°˜í™˜ (frontmatter í¬í•¨)
- [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ 404 ë°˜í™˜
- [ ] ë””ë ‰í† ë¦¬ ê²½ë¡œ 400 ë°˜í™˜

##### API-006: PUT /api/admin/content

íŒŒì¼ ì €ì¥

**Request:**
```json
{
  "path": "/guide/intro.md",
  "content": "# Updated Content"
}
```

**Response (200):**
```json
{
  "success": true,
  "path": "/guide/intro.md",
  "size": 42,
  "modifiedAt": "2026-01-06T11:00:00Z"
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] íŒŒì¼ ë‚´ìš© ì •ìƒ ì €ì¥
- [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œ 404 ë°˜í™˜
- [ ] write ê¶Œí•œ ì—†ì„ ì‹œ 403 ë°˜í™˜

##### API-007: POST /api/admin/create

íŒŒì¼ ë˜ëŠ” í´ë” ìƒì„±

**Request (íŒŒì¼):**
```json
{
  "path": "/guide/new-doc.md",
  "type": "file",
  "content": "# New Document\n"
}
```

**Request (í´ë”):**
```json
{
  "path": "/new-folder",
  "type": "directory"
}
```

**Response (201):**
```json
{
  "success": true,
  "path": "/guide/new-doc.md",
  "type": "file"
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] íŒŒì¼ ìƒì„± ë° ì´ˆê¸° ë‚´ìš© ì €ì¥
- [ ] í´ë” ìƒì„±
- [ ] ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ë¡œ 409 ë°˜í™˜
- [ ] ìƒìœ„ í´ë” ì—†ì„ ì‹œ 404 ë°˜í™˜

##### API-008: PUT /api/admin/rename

ì´ë¦„ ë³€ê²½

**Request:**
```json
{
  "oldPath": "/guide/intro.md",
  "newName": "getting-started.md"
}
```

**Response (200):**
```json
{
  "success": true,
  "oldPath": "/guide/intro.md",
  "newPath": "/guide/getting-started.md"
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] íŒŒì¼ ì´ë¦„ ë³€ê²½ ì„±ê³µ
- [ ] í´ë” ì´ë¦„ ë³€ê²½ ì„±ê³µ
- [ ] ë™ì¼ ì´ë¦„ìœ¼ë¡œ ë³€ê²½ ì‹œ 409 ë°˜í™˜
- [ ] íŠ¹ìˆ˜ë¬¸ì í¬í•¨ ì‹œ 400 ë°˜í™˜

##### API-009: PUT /api/admin/move

íŒŒì¼/í´ë” ì´ë™

**Request:**
```json
{
  "sourcePaths": ["/guide/intro.md", "/guide/image.png"],
  "targetDirectory": "/docs"
}
```

**Response (200):**
```json
{
  "success": true,
  "moved": [
    { "from": "/guide/intro.md", "to": "/docs/intro.md" },
    { "from": "/guide/image.png", "to": "/docs/image.png" }
  ]
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] ë‹¨ì¼ íŒŒì¼ ì´ë™ ì„±ê³µ
- [ ] ë‹¤ì¤‘ íŒŒì¼ ì´ë™ ì„±ê³µ
- [ ] í´ë” ì´ë™ ì„±ê³µ
- [ ] ìê¸° í•˜ìœ„ë¡œ ì´ë™ ì‹œ 400 ë°˜í™˜
- [ ] ëŒ€ìƒ í´ë” ì—†ì„ ì‹œ 404 ë°˜í™˜

##### API-010: DELETE /api/admin/entry

íŒŒì¼/í´ë” ì‚­ì œ

**Request:**
```json
{
  "paths": ["/guide/old.md", "/temp-folder"]
}
```

**Response (200):**
```json
{
  "success": true,
  "deleted": ["/guide/old.md", "/temp-folder"]
}
```

**ìˆ˜ìš© ê¸°ì¤€ í…ŒìŠ¤íŠ¸:**
- [ ] íŒŒì¼ ì‚­ì œ ì„±ê³µ
- [ ] í´ë” ì‚­ì œ ì„±ê³µ (í•˜ìœ„ í¬í•¨)
- [ ] delete ê¶Œí•œ ì—†ì„ ì‹œ 403 ë°˜í™˜
- [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œ ë¬´ì‹œ (ë¶€ë¶„ ì„±ê³µ)

### 3.3 í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„

#### 3.3.1 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
AdminApp
â”œâ”€â”€ AdminAuthModal           # API í‚¤ ì…ë ¥ ëª¨ë‹¬ (REQ-AUTH-002)
â”œâ”€â”€ AdminLayout
â”‚   â”œâ”€â”€ AdminToolbar         # ìƒë‹¨ íˆ´ë°” (REQ-FILE-004, REQ-FILE-005)
â”‚   â”œâ”€â”€ AdminSidebar
â”‚   â”‚   â””â”€â”€ AdminFileTree    # íŒŒì¼ íŠ¸ë¦¬ (REQ-TREE-001, REQ-SEL-001~004)
â”‚   â”œâ”€â”€ AdminContent
â”‚   â”‚   â”œâ”€â”€ FileViewer       # ë§ˆí¬ë‹¤ìš´ ë¯¸ë¦¬ë³´ê¸° (REQ-EDIT-004)
â”‚   â”‚   â””â”€â”€ FileEditor       # ë§ˆí¬ë‹¤ìš´ í¸ì§‘ê¸° (REQ-EDIT-001~006)
â”‚   â””â”€â”€ AdminContextMenu     # ìš°í´ë¦­ ë©”ë‰´ (REQ-CTX-001~006)
â”œâ”€â”€ RenameModal              # ì´ë¦„ ë³€ê²½ ëª¨ë‹¬ (REQ-FILE-001)
â”œâ”€â”€ CreateModal              # ìƒì„± ëª¨ë‹¬ (REQ-FILE-004, REQ-FILE-005)
â”œâ”€â”€ ConfirmModal             # ì‚­ì œ í™•ì¸ (REQ-FILE-002)
â””â”€â”€ UnsavedChangesModal      # ì €ì¥ ì•ˆí•¨ ê²½ê³  (REQ-EDIT-006)
```

#### 3.3.2 ìƒíƒœ ê´€ë¦¬

```javascript
const AdminState = {
  // ì¸ì¦ ìƒíƒœ (REQ-AUTH-002, REQ-AUTH-003)
  isAuthenticated: false,
  session: null,  // { token, name, permissions, expiresAt }

  // íŒŒì¼ íŠ¸ë¦¬ (REQ-TREE-001)
  fileTree: [],
  expandedPaths: new Set(),

  // ì„ íƒ ìƒíƒœ (REQ-SEL-001~004)
  selectedPaths: [],
  lastSelectedPath: null,

  // í¸ì§‘ ìƒíƒœ (REQ-EDIT-001~006)
  editMode: false,
  editingFile: null,  // { path, originalContent, currentContent }
  isDirty: false,

  // í´ë¦½ë³´ë“œ (REQ-CTX-005)
  clipboard: null,  // { operation: 'cut'|'copy', paths: [] }

  // ë“œë˜ê·¸ì•¤ë“œë¡­ (REQ-DND-001~005)
  dragSource: null,
  dropTarget: null,

  // UI ìƒíƒœ
  contextMenu: null,  // { x, y, targetPath }
  activeModal: null   // 'auth'|'rename'|'create'|'confirm'|null
};
```

#### 3.3.3 UI ìƒì„¸ ì„¤ê³„

##### ì¸ì¦ ëª¨ë‹¬ (AdminAuthModal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DocLight Admin              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  API Key                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Cancel    â”‚  â”‚   Login   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚  âš  Invalid API key (ì—ëŸ¬ ì‹œ)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### íŒŒì¼ íŠ¸ë¦¬ (AdminFileTree)

```
ğŸ“ docs                          [ì„ íƒë¨]
  ğŸ“„ README.md
  ğŸ“ guide
    ğŸ“„ intro.md                  [ë‹¤ì¤‘ ì„ íƒ]
    ğŸ“„ advanced.md               [ë‹¤ì¤‘ ì„ íƒ]
    ğŸ–¼ï¸ screenshot.png            [ë‹¤ì¤‘ ì„ íƒ]
  ğŸ“ api
    ğŸ“„ endpoints.md
ğŸ“„ config.json5
```

**íŒŒì¼ íƒ€ì… ì•„ì´ì½˜:**

| í™•ì¥ì | ì•„ì´ì½˜ | ì„¤ëª… |
|--------|--------|------|
| .md | ğŸ“„ | ë§ˆí¬ë‹¤ìš´ |
| .json, .json5 | ğŸ“‹ | JSON |
| .png, .jpg, .gif, .svg | ğŸ–¼ï¸ | ì´ë¯¸ì§€ |
| .pdf | ğŸ“• | PDF |
| .txt | ğŸ“ | í…ìŠ¤íŠ¸ |
| í´ë” (ë‹«í˜) | ğŸ“ | í´ë” |
| í´ë” (ì—´ë¦¼) | ğŸ“‚ | í´ë” |
| ê¸°íƒ€ | ğŸ“ | ê¸°íƒ€ |

##### ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (AdminContextMenu)

**íŒŒì¼ ì„ íƒ ì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœï¸  Edit        â”‚
â”‚ ğŸ“ Rename       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ âœ‚ï¸  Cut         â”‚
â”‚ ğŸ“‹ Copy         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ğŸ—‘ï¸  Delete      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í´ë” ì„ íƒ ì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ New File     â”‚
â”‚ ğŸ“ New Folder   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ğŸ“ Rename       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ âœ‚ï¸  Cut         â”‚
â”‚ ğŸ“‹ Copy         â”‚
â”‚ ğŸ“‹ Paste        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ğŸ—‘ï¸  Delete      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### í¸ì§‘ ëª¨ë“œ (FileEditor)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ /guide/intro.md  [â—]           [Preview] [Edit âœ“] [ğŸ’¾ Save]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ---                                                             â”‚
â”‚  title: Introduction                                             â”‚
â”‚  ---                                                             â”‚
â”‚                                                                  â”‚
â”‚  # Introduction                                                  â”‚
â”‚                                                                  â”‚
â”‚  Welcome to DocLight!                                            â”‚
â”‚  |                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[â—] = Dirty indicator (ë¯¸ì €ì¥ í‘œì‹œ)
```

##### ì €ì¥ ì•ˆí•¨ ê²½ê³  (UnsavedChangesModal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âš ï¸ Unsaved Changes          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  You have unsaved changes in        â”‚
â”‚  /guide/intro.md                    â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Cancel â”‚ â”‚Discard â”‚ â”‚  Save  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.4 í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

| ë‹¨ì¶•í‚¤ | ë™ì‘ | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ |
|--------|------|--------------|
| `Ctrl+S` | í¸ì§‘ ì¤‘ ì €ì¥ | REQ-EDIT-003 |
| `Ctrl+E` | í¸ì§‘ ëª¨ë“œ ì „í™˜ | REQ-EDIT-004 |
| `Delete` | ì„ íƒëœ í•­ëª© ì‚­ì œ | REQ-FILE-002 |
| `F2` | ì´ë¦„ ë³€ê²½ | REQ-FILE-001 |
| `Ctrl+C` | ë³µì‚¬ | REQ-CTX-005 |
| `Ctrl+X` | ì˜ë¼ë‚´ê¸° | REQ-CTX-005 |
| `Ctrl+V` | ë¶™ì—¬ë„£ê¸° | REQ-CTX-005 |
| `Escape` | ëª¨ë‹¬ ë‹«ê¸° / ì„ íƒ í•´ì œ | - |
| `Ctrl+A` | ì „ì²´ ì„ íƒ | REQ-SEL-004 |

---

## 4. ë³´ì•ˆ ì„¤ê³„

### 4.1 ì¸ì¦ ë° ì„¸ì…˜ (NFR-SEC-001)

```javascript
const crypto = require('crypto');

// ì„¸ì…˜ í† í° ìƒì„± - 32ë°”ì´íŠ¸ = 64ì hex
function generateSessionToken() {
  return crypto.randomBytes(32).toString('hex');
}

// ì„¸ì…˜ ì €ì¥ì†Œ (ë©”ëª¨ë¦¬ ê¸°ë°˜)
const sessions = new Map();

// ì„¸ì…˜ ê²€ì¦ ë¯¸ë“¤ì›¨ì–´
function adminAuth(req, res, next) {
  const token = req.cookies.doclight_admin_session
             || req.headers.authorization?.replace('Bearer ', '');

  const session = sessions.get(token);
  if (!session || session.expiresAt < Date.now()) {
    return res.status(401).json({ error: { code: 'UNAUTHORIZED' } });
  }

  req.adminSession = session;
  next();
}
```

### 4.2 ê¶Œí•œ ê²€ì‚¬ (REQ-AUTH-004)

```javascript
function requirePermission(permission) {
  return (req, res, next) => {
    if (!req.adminSession.permissions.includes(permission)) {
      return res.status(403).json({ error: { code: 'FORBIDDEN' } });
    }
    next();
  };
}

// ì‚¬ìš© ì˜ˆ
router.delete('/entry', adminAuth, requirePermission('delete'), deleteHandler);
```

### 4.3 ê²½ë¡œ ê²€ì¦ (NFR-SEC-002)

```javascript
// ê¸°ì¡´ path-validator.js í™œìš©
const { validatePath } = require('../utils/path-validator');

// ëª¨ë“  ê²½ë¡œ íŒŒë¼ë¯¸í„° ê²€ì¦
const safePath = validatePath(config.docsRoot, userPath);
```

### 4.4 íŒŒì¼ íƒ€ì… ì œí•œ (NFR-SEC-003)

```javascript
const EDITABLE_EXTENSIONS = ['.md', '.txt', '.json', '.json5', '.yaml', '.yml'];
const BLOCKED_EXTENSIONS = ['.exe', '.dll', '.sh', '.bat', '.cmd', '.ps1'];
const BLOCKED_FILENAME_CHARS = /[<>:"|?*\x00-\x1f]/;

function isEditable(filename) {
  return EDITABLE_EXTENSIONS.includes(path.extname(filename).toLowerCase());
}

function isValidFilename(filename) {
  return !BLOCKED_FILENAME_CHARS.test(filename);
}
```

---

## 5. íŒŒì¼ êµ¬ì¡°

### 5.1 ë°±ì—”ë“œ

```
src/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ api.js                    # ê¸°ì¡´ API
â”‚   â””â”€â”€ admin-api.js              # ê´€ë¦¬ì API (ì‹ ê·œ)
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ admin-auth-controller.js  # ì¸ì¦ (API-001~003)
â”‚   â”œâ”€â”€ admin-tree-controller.js  # íŠ¸ë¦¬ (API-004)
â”‚   â”œâ”€â”€ admin-file-controller.js  # íŒŒì¼ CRUD (API-005~007, 010, 011)
â”‚   â””â”€â”€ admin-move-controller.js  # ì´ë™/ì´ë¦„ë³€ê²½ (API-008, 009)
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.js                   # ê¸°ì¡´ API ì¸ì¦
â”‚   â””â”€â”€ admin-auth.js             # ê´€ë¦¬ì ì„¸ì…˜ ì¸ì¦ (ì‹ ê·œ)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ session-service.js        # ì„¸ì…˜ ê´€ë¦¬ (ì‹ ê·œ)
â””â”€â”€ utils/
    â””â”€â”€ config-loader.js          # apiKeys ì§€ì› (ìˆ˜ì •)
```

### 5.2 í”„ë¡ íŠ¸ì—”ë“œ

```
public/
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js                    # ê¸°ì¡´ (ì¼ë°˜ ëª¨ë“œ)
â”‚   â””â”€â”€ admin.js                  # ê´€ë¦¬ì ëª¨ë“œ (ì‹ ê·œ)
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css                 # ê¸°ì¡´
â”‚   â””â”€â”€ admin.css                 # ê´€ë¦¬ì ìŠ¤íƒ€ì¼ (ì‹ ê·œ)
â””â”€â”€ index.html

src/views/
â”œâ”€â”€ index.ejs                     # ê¸°ì¡´
â””â”€â”€ admin.ejs                     # ê´€ë¦¬ì í˜ì´ì§€ (ì‹ ê·œ)
```

---

## 6. ë¦¬ìŠ¤í¬ ë¶„ì„

### 6.1 ê¸°ìˆ ì  ë¦¬ìŠ¤í¬

| ID | ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ë°œìƒ ê°€ëŠ¥ì„± | ëŒ€ì‘ ë°©ì•ˆ |
|----|--------|--------|------------|----------|
| RISK-001 | ì„¸ì…˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ | ë†’ìŒ | ì¤‘ê°„ | ì£¼ê¸°ì  ë§Œë£Œ ì„¸ì…˜ ì •ë¦¬ (setInterval) |
| RISK-002 | ëŒ€ìš©ëŸ‰ íŒŒì¼ í¸ì§‘ ì‹œ ë¸Œë¼ìš°ì € ë©ˆì¶¤ | ì¤‘ê°„ | ë‚®ìŒ | íŒŒì¼ í¬ê¸° ì œí•œ (1MB), ê²½ê³  í‘œì‹œ |
| RISK-003 | ë“œë˜ê·¸ì•¤ë“œë¡­ ë¸Œë¼ìš°ì € í˜¸í™˜ì„± | ì¤‘ê°„ | ë‚®ìŒ | HTML5 DnD API + í´ë°± êµ¬í˜„ |
| RISK-004 | ë™ì‹œ í¸ì§‘ ì¶©ëŒ | ë†’ìŒ | ë‚®ìŒ | ë‚™ê´€ì  ë½ + ìˆ˜ì •ì¼ì‹œ ë¹„êµ |
| RISK-005 | ê²½ë¡œ ì¡°ì‘ ê³µê²© | ë†’ìŒ | ì¤‘ê°„ | path-validator.js í•„ìˆ˜ ì ìš© |

### 6.2 ëŒ€ì‘ ê³„íš

#### RISK-001: ì„¸ì…˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜

```javascript
// session-service.js
setInterval(() => {
  const now = Date.now();
  for (const [token, session] of sessions) {
    if (session.expiresAt < now) {
      sessions.delete(token);
    }
  }
}, 60000); // 1ë¶„ë§ˆë‹¤ ì •ë¦¬
```

#### RISK-002: ëŒ€ìš©ëŸ‰ íŒŒì¼ í¸ì§‘

```javascript
const MAX_EDITABLE_SIZE = 1 * 1024 * 1024; // 1MB

if (file.size > MAX_EDITABLE_SIZE) {
  return res.status(413).json({
    error: { code: 'FILE_TOO_LARGE', message: 'File exceeds 1MB limit for editing' }
  });
}
```

#### RISK-004: ë™ì‹œ í¸ì§‘ ì¶©ëŒ

```javascript
// ì €ì¥ ì‹œ modifiedAt ë¹„êµ
if (file.modifiedAt > request.originalModifiedAt) {
  return res.status(409).json({
    error: { code: 'CONFLICT', message: 'File was modified by another user' }
  });
}
```

---

## 7. êµ¬í˜„ ë‹¨ê³„

### Phase 1: ê¸°ë°˜ êµ¬ì¶• (ë°±ì—”ë“œ)

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-101 | config-loader.jsì— apiKeys ì§€ì› ì¶”ê°€ | REQ-AUTH-001 | 2ì‹œê°„ |
| TASK-102 | session-service.js êµ¬í˜„ | REQ-AUTH-002, 003 | 3ì‹œê°„ |
| TASK-103 | admin-auth.js ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„ | REQ-AUTH-004 | 2ì‹œê°„ |

### Phase 2: ê´€ë¦¬ì API

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ API | ì˜ˆìƒ ì‹œê°„ |
|----|----------|----------|----------|
| TASK-201 | POST /api/admin/auth êµ¬í˜„ | API-001 | 2ì‹œê°„ |
| TASK-202 | POST /api/admin/logout êµ¬í˜„ | API-002 | 1ì‹œê°„ |
| TASK-203 | GET /api/admin/session êµ¬í˜„ | API-003 | 1ì‹œê°„ |
| TASK-204 | GET /api/admin/tree êµ¬í˜„ | API-004 | 3ì‹œê°„ |
| TASK-205 | GET/PUT /api/admin/content êµ¬í˜„ | API-005, 006 | 3ì‹œê°„ |
| TASK-206 | POST /api/admin/create êµ¬í˜„ | API-007 | 2ì‹œê°„ |
| TASK-207 | PUT /api/admin/rename êµ¬í˜„ | API-008 | 2ì‹œê°„ |
| TASK-208 | PUT /api/admin/move êµ¬í˜„ | API-009 | 3ì‹œê°„ |
| TASK-209 | DELETE /api/admin/entry êµ¬í˜„ | API-010 | 2ì‹œê°„ |

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-301 | admin.ejs ë·° ìƒì„± | REQ-URL-001 | 2ì‹œê°„ |
| TASK-302 | /admin/* ë¼ìš°íŠ¸ ì²˜ë¦¬ | REQ-URL-002 | 2ì‹œê°„ |
| TASK-303 | AdminAuthModal êµ¬í˜„ | REQ-AUTH-002 | 3ì‹œê°„ |
| TASK-304 | AdminFileTree êµ¬í˜„ (ê¸°ë³¸) | REQ-TREE-001 | 4ì‹œê°„ |

### Phase 4: íŒŒì¼ ê´€ë¦¬ ê¸°ëŠ¥

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-401 | AdminContextMenu êµ¬í˜„ | REQ-CTX-001~006 | 4ì‹œê°„ |
| TASK-402 | ë‹¤ì¤‘ ì„ íƒ êµ¬í˜„ | REQ-SEL-001~004 | 3ì‹œê°„ |
| TASK-403 | RenameModal êµ¬í˜„ | REQ-FILE-001 | 2ì‹œê°„ |
| TASK-404 | ConfirmModal (ì‚­ì œ) êµ¬í˜„ | REQ-FILE-002 | 2ì‹œê°„ |
| TASK-405 | ë‹¤ì¤‘ ì‚­ì œ êµ¬í˜„ | REQ-FILE-003 | 2ì‹œê°„ |

### Phase 5: í¸ì§‘ ê¸°ëŠ¥

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-501 | FileEditor êµ¬í˜„ | REQ-EDIT-001, 002 | 4ì‹œê°„ |
| TASK-502 | ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„ | REQ-EDIT-003 | 2ì‹œê°„ |
| TASK-503 | ë¯¸ë¦¬ë³´ê¸°/í¸ì§‘ ì „í™˜ | REQ-EDIT-004 | 2ì‹œê°„ |
| TASK-504 | Dirty ìƒíƒœ ê´€ë¦¬ | REQ-EDIT-005 | 2ì‹œê°„ |
| TASK-505 | UnsavedChangesModal êµ¬í˜„ | REQ-EDIT-006 | 2ì‹œê°„ |

### Phase 6: ë“œë˜ê·¸ì•¤ë“œë¡­

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-601 | ë“œë˜ê·¸ ì‹œì‘ ì²˜ë¦¬ | REQ-DND-001, 002 | 2ì‹œê°„ |
| TASK-602 | ë“œë¡­ ì˜ì—­ í•˜ì´ë¼ì´íŠ¸ | REQ-DND-004 | 2ì‹œê°„ |
| TASK-603 | ë“œë¡­ ì²˜ë¦¬ ë° ì´ë™ | REQ-DND-001~003 | 3ì‹œê°„ |
| TASK-604 | ìê¸° í•˜ìœ„ ì´ë™ ë°©ì§€ | REQ-DND-005 | 1ì‹œê°„ |

### Phase 7: ì¶”ê°€ ê¸°ëŠ¥

| ID | ì‘ì—… í•­ëª© | ê´€ë ¨ ìš”êµ¬ì‚¬í•­ | ì˜ˆìƒ ì‹œê°„ |
|----|----------|--------------|----------|
| TASK-701 | CreateModal êµ¬í˜„ | REQ-FILE-004, 005 | 3ì‹œê°„ |
| TASK-702 | í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ë°”ì¸ë”© | - | 2ì‹œê°„ |
| TASK-703 | URL ìƒíƒœ ë™ê¸°í™” | REQ-URL-003 | 2ì‹œê°„ |

---

## 8. í…ŒìŠ¤íŠ¸ ê³„íš

### 8.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```javascript
// test/test-admin-api.js
describe('Admin API', () => {
  describe('POST /api/admin/auth', () => {
    it('should return session for valid API key');      // REQ-AUTH-002
    it('should return 401 for invalid API key');        // REQ-AUTH-002
    it('should return 400 for empty API key');          // REQ-AUTH-002
  });

  describe('GET /api/admin/tree', () => {
    it('should return all file types');                  // REQ-TREE-001
    it('should exclude hidden files');                   // REQ-TREE-001
    it('should include file metadata');                  // REQ-TREE-003
  });

  // ... ê° APIë³„ í…ŒìŠ¤íŠ¸
});
```

### 8.2 í†µí•© í…ŒìŠ¤íŠ¸

```javascript
// test/test-admin-integration.js
describe('Admin Workflow', () => {
  it('should complete login -> create -> edit -> save -> delete flow');
  it('should handle multi-select delete');
  it('should handle drag-and-drop move');
});
```

### 8.3 E2E í…ŒìŠ¤íŠ¸ (Playwright)

```javascript
// test/admin.spec.js
test.describe('Admin Mode', () => {
  test('login with valid API key', async ({ page }) => {
    await page.goto('/admin');
    await page.fill('[data-testid="api-key-input"]', 'valid-key');
    await page.click('[data-testid="login-button"]');
    await expect(page.locator('[data-testid="file-tree"]')).toBeVisible();
  });

  test('context menu on file right-click', async ({ page }) => {
    // ... ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ í…ŒìŠ¤íŠ¸
  });
});
```

---

## 9. ì¶”ì  ë§¤íŠ¸ë¦­ìŠ¤

### 9.1 ìš”êµ¬ì‚¬í•­ â†’ API ë§¤í•‘

| ìš”êµ¬ì‚¬í•­ ID | API ID | êµ¬í˜„ ìƒíƒœ |
|-------------|--------|----------|
| REQ-AUTH-001 | - (config) | ë¯¸êµ¬í˜„ |
| REQ-AUTH-002 | API-001 | ë¯¸êµ¬í˜„ |
| REQ-AUTH-003 | API-003 | ë¯¸êµ¬í˜„ |
| REQ-AUTH-004 | ë¯¸ë“¤ì›¨ì–´ | ë¯¸êµ¬í˜„ |
| REQ-AUTH-005 | API-002 | ë¯¸êµ¬í˜„ |
| REQ-TREE-001 | API-004 | ë¯¸êµ¬í˜„ |
| REQ-EDIT-001 | API-005 | ë¯¸êµ¬í˜„ |
| REQ-EDIT-003 | API-006 | ë¯¸êµ¬í˜„ |
| REQ-FILE-001 | API-008 | ë¯¸êµ¬í˜„ |
| REQ-FILE-002 | API-010 | ë¯¸êµ¬í˜„ |
| REQ-FILE-004 | API-007 | ë¯¸êµ¬í˜„ |
| REQ-FILE-005 | API-007 | ë¯¸êµ¬í˜„ |
| REQ-DND-001 | API-009 | ë¯¸êµ¬í˜„ |
| REQ-DND-002 | API-009 | ë¯¸êµ¬í˜„ |

### 9.2 ìš”êµ¬ì‚¬í•­ â†’ í…ŒìŠ¤íŠ¸ ë§¤í•‘

| ìš”êµ¬ì‚¬í•­ ID | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | í…ŒìŠ¤íŠ¸ ìƒíƒœ |
|-------------|--------------|------------|
| REQ-AUTH-002 | auth.test.js #1~4 | ë¯¸ì‘ì„± |
| REQ-TREE-001 | tree.test.js #1~4 | ë¯¸ì‘ì„± |
| REQ-EDIT-003 | edit.test.js #1~3 | ë¯¸ì‘ì„± |
| REQ-DND-005 | dnd.test.js #4 | ë¯¸ì‘ì„± |

---

## 10. ë¶€ë¡

### 10.1 ì›ë³¸ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­

> "ì„¤ì • íŒŒì¼ì— api í‚¤ë¥¼ ë³µìˆ˜ê°œë¥¼ ë§Œë“¤ë„ë¡ í•  ê²ƒì…ë‹ˆë‹¤.
> ì£¼ì†Œì— adminì„ ì…ë ¥í•˜ê³  ë“¤ì–´ê°€ë©´ api í‚¤ë¥¼ ë„£ì„ ìˆ˜ ìˆë„ë¡ ì°½ì´ ì—´ë¦½ë‹ˆë‹¤.
> ì´ ì°½ì€ ë‚´ë¶€ ëª¨ë‹¬ í˜•íƒœë¡œ ì—´ë ¤ì•¼ í•©ë‹ˆë‹¤.
> ì´ë•Œ, ì£¼ì†ŒëŠ” í•­ìƒ /adminìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.
> ë§Œì•½, test.md íŒŒì¼ì„ ì—´ë©´ /admin/testì™€ ê°™ì´ ì¶œë ¥ë©ë‹ˆë‹¤.
> api keyë¥¼ ì…ë ¥í•˜ê³  ì¼ì¹˜í•˜ë©´, ê´€ë¦¬ì ëª¨ë“œë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤.
> ì¢Œì¸¡ íŒŒì¼ ë¦¬ìŠ¤íŠ¸ì—ì„œ íŒŒì¼ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³  ì˜¤ë¥¸ìª½ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ê°€ ì—´ë¦½ë‹ˆë‹¤.
> ê´€ë¦¬ì ëª¨ë“œì—ì„œëŠ” md íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ í˜•ì‹ë“¤ë„ ì¢Œì¸¡ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œë©ë‹ˆë‹¤.
> ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ì— remove, renameê³¼ editê°€ ìˆìŠµë‹ˆë‹¤.
> shiftë¥¼ ëˆ„ë¥´ê³  íŒŒì¼ ë¦¬ìŠ¤íŠ¸ì— íŒŒì¼ì„ ì—¬ëŸ¬ê°œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> editëŠ” ë””ë ‰í† ë¦¬ì—ëŠ” ì¶œë ¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> editë¥¼ ì„ íƒí•˜ë©´, ìš°ì¸¡ ì°½ì— md ì›ë¬¸ì´ ë‚˜ì˜µë‹ˆë‹¤.
> ìƒë‹¨ì— ì €ì¥ ë²„íŠ¼ì´ ìƒê¸°ë©° ì´ê²ƒì„ ëˆŒëŸ¬ì„œ í¸ì§‘ì¤‘ì¸ md íŒŒì¼ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ìƒë‹¨ì— ë¯¸ë¦¬ë³´ê¸°/í¸ì§‘ ì „í™˜ ë²„íŠ¼ë„ ìƒê¹ë‹ˆë‹¤.
> ë§Œì•½, ë‹¤ë¥¸ íŒŒì¼ì„ ì…ë ¥í•˜ë©´ ëª¨ë‹¬ë¡œ í˜„ì¬ í¸ì§‘ì¤‘ì¸ ë¬¸ì„œê°€ ìˆë‹¤ëŠ” ê²½ê³  ë©”ì‹œì§€ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
> ë””ë ‰í† ë¦¬ë¥¼ ë§ˆìš°ìŠ¤ë¡œ ì„ íƒí•˜ê³  ë§ˆìš°ìŠ¤ ë²„íŠ¼ì„ ëˆ„ë¥¸ ìƒíƒœë¡œ ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ì— ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ë””ë ‰í† ë¦¬ë¥¼ ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ì˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ë””ë ‰í† ë¦¬ë¥¼ ì„ íƒí•˜ê³ , ë§¨ ìœ„ë¡œ ì˜¬ë¦´ê²½ìš° ë¶€ëª¨ ê²½ë¡œë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
> íŒŒì¼ë„ ë§ˆì°¬ê°€ì§€ë¡œ ë¶€ëª¨ë¡œ ì˜¬ë¦¬ê±°ë‚˜ ë””ë ‰í† ë¦¬ ë‚´ë¶€ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> Renameì„ ì„ íƒí•˜ë©´ íŒŒì¼ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> íŒŒì¼ ì´ë¦„ì€ ëª¨ë‹¬ì°½ì„ í†µí•˜ì—¬ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

### 10.2 ì˜ì¡´ì„±

| íŒ¨í‚¤ì§€ | ìš©ë„ | ì„¤ì¹˜ í•„ìš” |
|--------|------|----------|
| cookie-parser | ì„¸ì…˜ ì¿ í‚¤ íŒŒì‹± | í™•ì¸ í•„ìš” |
| (ê¸°ì¡´ ì˜ì¡´ì„±) | - | ì´ë¯¸ ì„¤ì¹˜ë¨ |

---

*ë¬¸ì„œ ë*
