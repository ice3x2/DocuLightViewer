# DocLight Step 18 구현 계획 — 목차

## 개요

DocLight Electron Markdown 뷰어에 7개 신규 기능을 추가하는 증분 확장 계획.
SRS: `docs/plan/srs.step18.md`

## 범위

| 기능 | 관련 FR | 난이도 | Phase |
|------|---------|--------|-------|
| 로컬 이미지 경로 해석 | FR-18-007 | 낮음 | 1 |
| MCP 포트 디스커버리 | FR-18-002 | 낮음 | 1 |
| 파일 감시 및 자동 새로고침 | FR-18-001 | 중간 | 2 |
| 최근 파일 트레이 메뉴 | FR-18-005 | 낮음 | 3 |
| 사이드바 파일 검색 | FR-18-004 | 중간 | 4 |
| PDF 내보내기 | FR-18-003 | 높음 | 5 |
| 탭 기반 다중 문서 뷰 | FR-18-006 | 매우 높음 | 6 |

## 문서 목록

### 설계
- [00-1. Architecture](./00-1.architecture.md) — 시스템 아키텍처, 모듈 구조, 데이터 흐름
- [00-2. Tech Decisions](./00-2.tech-decisions.md) — 기술 결정 기록 (ADR 10개)

### Phase 문서
- [Phase 1: 모듈 인프라 + 이미지 경로 + 포트 디스커버리](./01.phase-1-infrastructure.md) — FR-18-007, FR-18-002
- [Phase 2: 파일 감시 및 자동 새로고침](./02.phase-2-file-watcher.md) — FR-18-001
- [Phase 3: 최근 파일 트레이 메뉴](./03.phase-3-recent-files.md) — FR-18-005
- [Phase 4: 사이드바 파일 검색](./04.phase-4-sidebar-search.md) — FR-18-004
- [Phase 5: PDF 내보내기](./05.phase-5-pdf-export.md) — FR-18-003
- [Phase 6: 탭 기반 다중 문서 뷰](./06.phase-6-tab-view.md) — FR-18-006
- [Phase 7: 통합 및 마무리](./07.phase-7-integration.md) — 기능 간 검증, CLAUDE.md 갱신

### 검증
- [Phase 1 검증](./verification/phase-1-verification.md)
- [Phase 2 검증](./verification/phase-2-verification.md)
- [Phase 3 검증](./verification/phase-3-verification.md)
- [Phase 4 검증](./verification/phase-4-verification.md)
- [Phase 5 검증](./verification/phase-5-verification.md)
- [Phase 6 검증](./verification/phase-6-verification.md)
- [Phase 7 검증](./verification/phase-7-verification.md)
- [통합 테스트 가이드](./integration-test-guide.md)
- [최종 검증 보고서](./final-validation.md)

## 의존성 그래프

```
Phase 1 (인프라+이미지+포트) ──▶ Phase 2 (파일 감시) ──▶ Phase 3 (최근 파일)
                                       │
                                       ▼
                                 Phase 4 (사이드바 검색) ──▶ Phase 5 (PDF 내보내기)
                                                                    │
                                                                    ▼
                                                              Phase 6 (탭 뷰)
                                                                    │
                                                                    ▼
                                                              Phase 7 (통합)
```

- Phase 1은 모든 Phase의 기반 (window.DocuLight 네임스페이스, 설정 스키마)
- Phase 2~5는 Phase 1 이후 순차 실행 (viewer.js 공유 상태 의존)
- Phase 6은 Phase 4, 5 이후 (사이드바 검색 결과 클릭과 탭 연동)
- Phase 7은 모든 Phase 완료 후

## 수정 파일 요약

| 파일 | Phase | 변경 유형 |
|------|-------|----------|
| `src/main/index.js` | 1,2,3,5,6 | IPC 핸들러 추가, 트레이 메뉴, 포트 파일, 설정 |
| `src/main/window-manager.js` | 1,2,3,5 | watcher, PDF, 최근 파일, imageBasePath |
| `src/main/mcp-http.mjs` | 1 | 시그니처 변경, 포트 파일 기록 |
| `src/main/preload.js` | 5,6 | 신규 IPC API 7개 추가 |
| `src/renderer/viewer.html` | 1,4,5,6 | 모듈 script 태그, 검색/모달/탭바 HTML |
| `src/renderer/viewer.js` | 1,2,6 | 모듈 시스템 초기화, 스크롤 보존, 탭 분기 |
| `src/renderer/viewer.css` | 4,5,6 | 검색/모달/탭 스타일 |
| `src/renderer/image-resolver.js` | 1 | **신규** — 이미지 경로 해석 |
| `src/renderer/sidebar-search.js` | 4 | **신규** — 사이드바 검색 |
| `src/renderer/pdf-export-ui.js` | 5 | **신규** — PDF 내보내기 UI |
| `src/renderer/tab-manager.js` | 6 | **신규** — 탭 관리 |
| `src/renderer/settings.html` | 1 | autoRefresh, enableTabs 체크박스 |
| `src/renderer/settings.js` | 1 | 설정 저장/로드 |
| `src/locales/*.json` (4개) | 1 | 신규 i18n 키 ~25개 |
| `CLAUDE.md` | 7 | Settings, Preload, Shortcuts 업데이트 |
