# Tech Decisions (ADR)

## ADR-001: 리소스 파일 형식 — JSON

**상태**: 확정

**컨텍스트**: 프로젝트는 순수 JavaScript(CJS + ESM)로 구성. TypeScript 미사용.

**결정**: `src/locales/ko.json`, `src/locales/en.json` 형태의 JSON 파일 사용.

**근거**:
- `require()` 또는 `JSON.parse(fs.readFileSync())` 으로 즉시 로드 가능
- electron-store 등 기존 설정도 JSON 형식
- 외부 i18n 라이브러리 (i18next 등) 도입 불필요 — 프로젝트 규모에 비해 과도

---

## ADR-002: 문자열 모듈 — CommonJS (`strings.js`)

**상태**: 확정

**컨텍스트**: 사용자가 "Strings.ts"를 언급했으나, 프로젝트 전체가 JavaScript.

**결정**: `src/main/strings.js` (CJS) 모듈로 구현.

**근거**:
- 프로젝트 일관성 유지 (main process 파일은 모두 .js CJS)
- TypeScript 도입은 빌드 파이프라인 변경 필요 — 범위 초과

---

## ADR-003: 언어 감지 — `app.getLocale()`

**상태**: 확정

**결정**: Electron의 `app.getLocale()` API 사용.

**근거**:
- OS 시스템 언어를 자동 반환
- `ko`, `ko-KR` 등 반환 → prefix match로 `ko` 또는 `en` 결정
- 추가 의존성 없음

**폴백 순서**: `app.getLocale()` → prefix match → `en` (기본값)

---

## ADR-004: Renderer 문자열 전달 — IPC + data-i18n

**상태**: 확정

**결정**:
1. Main에서 `ipcMain.handle('get-strings')` → locale 객체 반환
2. preload.js에 `getStrings()` bridge 추가
3. HTML에 `data-i18n` 속성 → JS에서 자동 치환

**근거**:
- 기존 `getSettings()` / `saveSettings()` 패턴과 동일
- `contextIsolation: true` + `sandbox: true` 환경 호환
- HTML 문자열은 선언적으로 관리 (`data-i18n` 속성)
- JS 동적 문자열은 `t(key)` 함수로 관리

---

## ADR-005: MCP 문자열 — i18n 범위 제외

**상태**: 확정

**결정**: MCP 도구 설명, 스키마 설명, 응답 메시지는 영어 고정.

**근거**:
- MCP 프로토콜 소비자는 AI 에이전트/개발 도구 — 영어가 표준
- 도구 설명이 언어별로 바뀌면 MCP 클라이언트 호환성 문제 발생 가능
- stdio/HTTP 서버의 중복 문자열은 별도 상수 모듈로 추출

---

## ADR-006: 콘솔 로그 — i18n 범위 제외

**상태**: 확정

**결정**: `[doculight]` 접두사 콘솔 메시지는 영어 유지.

**근거**:
- 개발자/디버깅 전용
- 로그 검색 시 언어 일관성 필요
- 사용자에게 노출되지 않음
