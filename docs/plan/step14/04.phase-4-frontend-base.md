# Phase 4: í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°

| í•­ëª© | ë‚´ìš© |
|------|------|
| **Phase** | 4 |
| **ì˜ˆìƒ ì‹œê°„** | 11ì‹œê°„ |
| **ì„ í–‰ ì¡°ê±´** | Phase 2 ì™„ë£Œ |
| **ê´€ë ¨ ìš”êµ¬ì‚¬í•­** | REQ-URL-001, REQ-URL-002, REQ-TREE-002, NFR-SEC-003, NFR-COMPAT-001 |

---

## 1. ëª©í‘œ ë° ë²”ìœ„

### 1.1 ëª©í‘œ

- admin.ejs ë·° í…œí”Œë¦¿ ìƒì„±
- admin.js í´ë¼ì´ì–¸íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ê¸°ë³¸ êµ¬ì¡°
- admin.css ìŠ¤íƒ€ì¼ì‹œíŠ¸ ìƒì„±
- ì¸ì¦ ëª¨ë‹¬ ë° íŒŒì¼ íŠ¸ë¦¬ ê¸°ë³¸ UI

### 1.2 ë²”ìœ„

**í¬í•¨:**
- /admin ë¼ìš°íŠ¸ ì²˜ë¦¬
- ì¸ì¦ ëª¨ë‹¬ (AdminAuthModal)
- íŒŒì¼ íŠ¸ë¦¬ ë Œë”ë§ (AdminFileTree)
- íŒŒì¼ íƒ€ì…ë³„ ì•„ì´ì½˜
- ê¸°ë³¸ ë ˆì´ì•„ì›ƒ (ì‚¬ì´ë“œë°” + ì»¨í…ì¸ )

**ì œì™¸:**
- ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ (Phase 5)
- íŒŒì¼ í¸ì§‘ (Phase 6)
- ë“œë˜ê·¸ì•¤ë“œë¡­ (Phase 7)

---

## 2. ì•„í‚¤í…ì²˜ ì°¸ì¡°

> ì°¸ì¡°: [00-1.architecture.md](00-1.architecture.md) - 3.3 í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„

### 2.1 ê´€ë ¨ ì»´í¬ë„ŒíŠ¸

```
src/views/admin.ejs       â† ì‹ ê·œ
public/js/admin.js        â† ì‹ ê·œ
public/css/admin.css      â† ì‹ ê·œ
src/app.js                â† /admin ë¼ìš°íŠ¸ ì¶”ê°€
```

---

## 3. êµ¬í˜„ í•­ëª© ì²´í¬ë¦¬ìŠ¤íŠ¸

### 3.1 admin.ejs í…œí”Œë¦¿

- [ ] **TASK-401**: HTML ê¸°ë³¸ êµ¬ì¡°
  - DOCTYPE, head (ë©”íƒ€, CSS ë§í¬)
  - body (ì‚¬ì´ë“œë°”, ì»¨í…ì¸ , ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ)

- [ ] **TASK-402**: ì¸ì¦ ëª¨ë‹¬ ë§ˆí¬ì—…
  - API í‚¤ ì…ë ¥ í•„ë“œ
  - ë¡œê·¸ì¸/ì·¨ì†Œ ë²„íŠ¼
  - ì—ëŸ¬ ë©”ì‹œì§€ ì˜ì—­

- [ ] **TASK-403**: ë ˆì´ì•„ì›ƒ êµ¬ì¡°
  - AdminSidebar (ì¢Œì¸¡ íŒŒì¼ íŠ¸ë¦¬)
  - AdminToolbar (ìƒë‹¨ íˆ´ë°”)
  - AdminContent (ìš°ì¸¡ ì»¨í…ì¸ )

- [ ] **TASK-404**: ìŠ¤í¬ë¦½íŠ¸/ìŠ¤íƒ€ì¼ ë¡œë“œ
  - admin.css
  - admin.js
  - ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ (marked, highlight, mermaid, dompurify)

### 3.2 admin.js ê¸°ë³¸ êµ¬ì¡°

- [ ] **TASK-405**: AdminState ê°ì²´ ì •ì˜
  ```javascript
  const AdminState = {
    isAuthenticated: false,
    session: null,
    fileTree: [],
    expandedPaths: new Set(),
    selectedPaths: [],
    // ...
  };
  ```

- [ ] **TASK-406**: AdminAPI ëª¨ë“ˆ êµ¬í˜„
  - auth(apiKey): ë¡œê·¸ì¸
  - logout(): ë¡œê·¸ì•„ì›ƒ
  - getSession(): ì„¸ì…˜ í™•ì¸
  - getTree(): íŒŒì¼ íŠ¸ë¦¬ ì¡°íšŒ
  - getContent(path): íŒŒì¼ ë‚´ìš© ì¡°íšŒ

- [ ] **TASK-407**: AuthModule êµ¬í˜„
  - showAuthModal(): ëª¨ë‹¬ í‘œì‹œ
  - hideAuthModal(): ëª¨ë‹¬ ìˆ¨ê¹€
  - handleLogin(): ë¡œê·¸ì¸ ì²˜ë¦¬
  - handleLogout(): ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  - checkSession(): í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ í™•ì¸

- [ ] **TASK-408**: TreeModule ê¸°ë³¸ êµ¬í˜„
  - renderTree(tree): íŠ¸ë¦¬ ë Œë”ë§
  - handleExpand(path): í´ë” í™•ì¥/ì¶•ì†Œ
  - handleSelect(path): í•­ëª© ì„ íƒ
  - getFileIcon(extension): ì•„ì´ì½˜ ë°˜í™˜

- [ ] **TASK-409**: URL ë¼ìš°íŒ… êµ¬í˜„
  - parseCurrentPath(): /admin/xxxì—ì„œ ê²½ë¡œ ì¶”ì¶œ
  - navigateTo(path): URL ë³€ê²½ + íŒŒì¼ ë¡œë“œ
  - handlePopState(): ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸° ì²˜ë¦¬

- [ ] **TASK-410**: ì´ˆê¸°í™” í•¨ìˆ˜
  - init(): DOMContentLoadedì—ì„œ í˜¸ì¶œ
  - ì„¸ì…˜ í™•ì¸ â†’ íŠ¸ë¦¬ ë¡œë“œ â†’ URL íŒŒì‹±

### 3.3 admin.css ìŠ¤íƒ€ì¼

- [ ] **TASK-411**: ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼
  - 3ë‹¨ ë ˆì´ì•„ì›ƒ (ì‚¬ì´ë“œë°”, ì»¨í…ì¸ , ì„ íƒì  ìš°ì¸¡)
  - ë¦¬ì‚¬ì´ì € (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ì°¸ì¡°)

- [ ] **TASK-412**: ì¸ì¦ ëª¨ë‹¬ ìŠ¤íƒ€ì¼
  - ì¤‘ì•™ ì •ë ¬, ë°˜íˆ¬ëª… ë°°ê²½
  - ì…ë ¥ í•„ë“œ, ë²„íŠ¼ ìŠ¤íƒ€ì¼

- [ ] **TASK-413**: íŒŒì¼ íŠ¸ë¦¬ ìŠ¤íƒ€ì¼
  - íŠ¸ë¦¬ í•­ëª© (í´ë”, íŒŒì¼)
  - ì„ íƒ ìƒíƒœ í•˜ì´ë¼ì´íŠ¸
  - í™•ì¥/ì¶•ì†Œ ì•„ì´ì½˜

- [ ] **TASK-414**: íŒŒì¼ íƒ€ì… ì•„ì´ì½˜ ìŠ¤íƒ€ì¼
  - í™•ì¥ìë³„ ì•„ì´ì½˜ (emoji ë˜ëŠ” SVG)

- [ ] **TASK-415**: íˆ´ë°” ìŠ¤íƒ€ì¼
  - ìƒë‹¨ ê³ ì •
  - ë²„íŠ¼ ìŠ¤íƒ€ì¼

### 3.4 app.js ë¼ìš°íŠ¸ ì¶”ê°€

- [ ] **TASK-416**: GET /admin ë¼ìš°íŠ¸
  - admin.ejs ë Œë”ë§
  - config.ui ì „ë‹¬

- [ ] **TASK-417**: GET /admin/* ë¼ìš°íŠ¸
  - ë™ì¼í•˜ê²Œ admin.ejs ë Œë”ë§
  - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ê²½ë¡œ íŒŒì‹±

---

## 4. ìƒì„¸ êµ¬í˜„ ëª…ì„¸

### 4.1 admin.ejs

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= config.ui.title %> - Admin</title>
  <link rel="stylesheet" href="/css/admin.css">
  <link rel="icon" href="<%= config.ui.icon %>">
</head>
<body>
  <!-- ì¸ì¦ ëª¨ë‹¬ -->
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <h2><%= config.ui.title %> Admin</h2>
      <div class="form-group">
        <label for="api-key-input">API Key</label>
        <input type="password" id="api-key-input" placeholder="Enter API key">
      </div>
      <div id="auth-error" class="error-message" style="display: none;"></div>
      <div class="modal-buttons">
        <button id="auth-cancel" class="btn btn-secondary">Cancel</button>
        <button id="auth-login" class="btn btn-primary">Login</button>
      </div>
    </div>
  </div>

  <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
  <div id="admin-app" style="display: none;">
    <!-- íˆ´ë°” -->
    <div id="admin-toolbar">
      <div class="toolbar-left">
        <span class="app-title"><%= config.ui.title %> Admin</span>
      </div>
      <div class="toolbar-right">
        <span id="session-name"></span>
        <button id="logout-btn" class="btn btn-small">Logout</button>
      </div>
    </div>

    <!-- ì‚¬ì´ë“œë°” -->
    <div id="admin-sidebar">
      <div class="sidebar-header">
        <span>Files</span>
        <button id="refresh-tree" class="btn-icon" title="Refresh">ğŸ”„</button>
      </div>
      <div id="file-tree"></div>
    </div>

    <!-- ë¦¬ì‚¬ì´ì € -->
    <div id="sidebar-resizer"></div>

    <!-- ì»¨í…ì¸  -->
    <div id="admin-content">
      <div id="content-placeholder">
        <p>Select a file from the tree</p>
      </div>
      <div id="file-viewer" style="display: none;"></div>
    </div>
  </div>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="/lib/marked.min.js"></script>
  <script src="/lib/highlight.min.js"></script>
  <script src="/lib/mermaid.min.js"></script>
  <script src="/lib/purify.min.js"></script>
  <script src="/js/admin.js"></script>
</body>
</html>
```

### 4.2 admin.js í•µì‹¬ êµ¬ì¡°

```javascript
// public/js/admin.js

// ============================================================
// State
// ============================================================
const AdminState = {
  isAuthenticated: false,
  session: null,
  fileTree: [],
  expandedPaths: new Set(),
  selectedPaths: [],
  lastSelectedPath: null,
  currentViewPath: null,
  isLoading: false
};

// ============================================================
// API Module
// ============================================================
const AdminAPI = {
  async auth(apiKey) {
    const response = await fetch('/api/admin/auth', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ apiKey })
    });
    return response.json();
  },

  async logout() {
    const response = await fetch('/api/admin/logout', {
      method: 'POST',
      credentials: 'include'
    });
    return response.json();
  },

  async getSession() {
    const response = await fetch('/api/admin/session', {
      credentials: 'include'
    });
    if (!response.ok) return null;
    return response.json();
  },

  async getTree(path = '/') {
    const response = await fetch(`/api/admin/tree?path=${encodeURIComponent(path)}`, {
      credentials: 'include'
    });
    return response.json();
  },

  async getContent(path) {
    const response = await fetch(`/api/admin/content?path=${encodeURIComponent(path)}`, {
      credentials: 'include'
    });
    return response.json();
  }
};

// ============================================================
// Auth Module
// ============================================================
const AuthModule = {
  showAuthModal() {
    document.getElementById('auth-modal').style.display = 'flex';
    document.getElementById('admin-app').style.display = 'none';
    document.getElementById('api-key-input').focus();
  },

  hideAuthModal() {
    document.getElementById('auth-modal').style.display = 'none';
    document.getElementById('admin-app').style.display = 'grid';
  },

  showError(message) {
    const errorEl = document.getElementById('auth-error');
    errorEl.textContent = message;
    errorEl.style.display = 'block';
  },

  hideError() {
    document.getElementById('auth-error').style.display = 'none';
  },

  async handleLogin() {
    const apiKey = document.getElementById('api-key-input').value.trim();
    if (!apiKey) {
      this.showError('Please enter an API key');
      return;
    }

    try {
      const result = await AdminAPI.auth(apiKey);
      if (result.success) {
        AdminState.isAuthenticated = true;
        AdminState.session = result.session;
        this.hideAuthModal();
        this.updateSessionUI();
        await TreeModule.loadTree();
        URLModule.handleInitialPath();
      } else {
        this.showError(result.error?.message || 'Invalid API key');
      }
    } catch (error) {
      this.showError('Connection error');
    }
  },

  async handleLogout() {
    await AdminAPI.logout();
    AdminState.isAuthenticated = false;
    AdminState.session = null;
    this.showAuthModal();
  },

  async checkSession() {
    try {
      const result = await AdminAPI.getSession();
      if (result?.success) {
        AdminState.isAuthenticated = true;
        AdminState.session = result.session;
        this.hideAuthModal();
        this.updateSessionUI();
        return true;
      }
    } catch (error) {
      // ì„¸ì…˜ ì—†ìŒ
    }
    return false;
  },

  updateSessionUI() {
    document.getElementById('session-name').textContent = AdminState.session?.name || '';
  }
};

// ============================================================
// Tree Module
// ============================================================
const TreeModule = {
  async loadTree() {
    const result = await AdminAPI.getTree('/');
    if (result.success) {
      AdminState.fileTree = result.tree;
      this.renderTree();
    }
  },

  renderTree() {
    const container = document.getElementById('file-tree');
    container.innerHTML = '';
    this.renderNodes(container, AdminState.fileTree, 0);
  },

  renderNodes(container, nodes, depth) {
    for (const node of nodes) {
      const item = document.createElement('div');
      item.className = 'tree-item';
      item.style.paddingLeft = `${depth * 16 + 8}px`;
      item.dataset.path = node.path;
      item.dataset.type = node.type;

      // ì•„ì´ì½˜
      const icon = document.createElement('span');
      icon.className = 'tree-icon';
      if (node.type === 'directory') {
        const isExpanded = AdminState.expandedPaths.has(node.path);
        icon.textContent = isExpanded ? 'ğŸ“‚' : 'ğŸ“';
        icon.classList.add('folder-icon');
      } else {
        icon.textContent = this.getFileIcon(node.extension);
      }
      item.appendChild(icon);

      // ì´ë¦„
      const name = document.createElement('span');
      name.className = 'tree-name';
      name.textContent = node.name;
      item.appendChild(name);

      // í´ë¦­ ì´ë²¤íŠ¸
      item.addEventListener('click', (e) => this.handleItemClick(e, node));

      container.appendChild(item);

      // ìì‹ ë…¸ë“œ (í™•ì¥ëœ ê²½ìš°)
      if (node.type === 'directory' && node.children && AdminState.expandedPaths.has(node.path)) {
        this.renderNodes(container, node.children, depth + 1);
      }
    }
  },

  handleItemClick(e, node) {
    if (node.type === 'directory') {
      this.toggleExpand(node.path);
    } else {
      this.selectFile(node.path);
    }
  },

  toggleExpand(path) {
    if (AdminState.expandedPaths.has(path)) {
      AdminState.expandedPaths.delete(path);
    } else {
      AdminState.expandedPaths.add(path);
    }
    this.renderTree();
  },

  selectFile(path) {
    AdminState.selectedPaths = [path];
    AdminState.lastSelectedPath = path;
    this.updateSelection();
    ViewerModule.loadFile(path);
    URLModule.navigateTo(path);
  },

  updateSelection() {
    document.querySelectorAll('.tree-item').forEach(item => {
      item.classList.toggle('selected', AdminState.selectedPaths.includes(item.dataset.path));
    });
  },

  getFileIcon(extension) {
    const iconMap = {
      '.md': 'ğŸ“„',
      '.txt': 'ğŸ“',
      '.json': 'ğŸ“‹',
      '.json5': 'ğŸ“‹',
      '.yaml': 'ğŸ“‹',
      '.yml': 'ğŸ“‹',
      '.png': 'ğŸ–¼ï¸',
      '.jpg': 'ğŸ–¼ï¸',
      '.jpeg': 'ğŸ–¼ï¸',
      '.gif': 'ğŸ–¼ï¸',
      '.svg': 'ğŸ–¼ï¸',
      '.pdf': 'ğŸ“•'
    };
    return iconMap[extension?.toLowerCase()] || 'ğŸ“';
  }
};

// ============================================================
// Viewer Module
// ============================================================
const ViewerModule = {
  async loadFile(path) {
    const placeholder = document.getElementById('content-placeholder');
    const viewer = document.getElementById('file-viewer');

    const result = await AdminAPI.getContent(path);
    if (!result.success) {
      viewer.innerHTML = `<p class="error">Error: ${result.error?.message}</p>`;
      return;
    }

    placeholder.style.display = 'none';
    viewer.style.display = 'block';

    // ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
    if (path.endsWith('.md')) {
      const html = DOMPurify.sanitize(marked.parse(result.content));
      viewer.innerHTML = html;
      // ì½”ë“œ í•˜ì´ë¼ì´íŒ…
      viewer.querySelectorAll('pre code').forEach(block => {
        hljs.highlightElement(block);
      });
    } else {
      // ì¼ë°˜ í…ìŠ¤íŠ¸
      viewer.innerHTML = `<pre>${this.escapeHtml(result.content)}</pre>`;
    }

    AdminState.currentViewPath = path;
  },

  escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }
};

// ============================================================
// URL Module
// ============================================================
const URLModule = {
  parseCurrentPath() {
    const path = window.location.pathname;
    if (path.startsWith('/admin')) {
      const filePath = path.substring('/admin'.length) || '/';
      return filePath;
    }
    return '/';
  },

  navigateTo(path) {
    const url = '/admin' + path;
    if (window.location.pathname !== url) {
      history.pushState({ path }, '', url);
    }
  },

  handlePopState(event) {
    const path = event.state?.path || this.parseCurrentPath();
    if (path !== '/') {
      TreeModule.selectFile(path);
    }
  },

  handleInitialPath() {
    const path = this.parseCurrentPath();
    if (path && path !== '/') {
      TreeModule.selectFile(path);
    }
  }
};

// ============================================================
// Event Bindings
// ============================================================
function bindEvents() {
  // ì¸ì¦
  document.getElementById('auth-login').addEventListener('click', () => AuthModule.handleLogin());
  document.getElementById('auth-cancel').addEventListener('click', () => window.location.href = '/');
  document.getElementById('api-key-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') AuthModule.handleLogin();
  });

  // ë¡œê·¸ì•„ì›ƒ
  document.getElementById('logout-btn').addEventListener('click', () => AuthModule.handleLogout());

  // íŠ¸ë¦¬ ìƒˆë¡œê³ ì¹¨
  document.getElementById('refresh-tree').addEventListener('click', () => TreeModule.loadTree());

  // ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°
  window.addEventListener('popstate', (e) => URLModule.handlePopState(e));
}

// ============================================================
// Initialization
// ============================================================
async function init() {
  bindEvents();

  // ì„¸ì…˜ í™•ì¸
  const hasSession = await AuthModule.checkSession();
  if (hasSession) {
    await TreeModule.loadTree();
    URLModule.handleInitialPath();
  } else {
    AuthModule.showAuthModal();
  }
}

document.addEventListener('DOMContentLoaded', init);
```

### 4.3 admin.css í•µì‹¬ ìŠ¤íƒ€ì¼

```css
/* public/css/admin.css */

/* Reset */
* { box-sizing: border-box; margin: 0; padding: 0; }

/* Variables */
:root {
  --sidebar-width: 280px;
  --toolbar-height: 48px;
  --primary-color: #0066cc;
  --bg-color: #f5f5f5;
  --sidebar-bg: #fff;
  --border-color: #ddd;
  --text-color: #333;
  --selected-bg: #e3f2fd;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  padding: 24px;
  border-radius: 8px;
  width: 360px;
  max-width: 90%;
}

.modal-content h2 {
  margin-bottom: 16px;
  text-align: center;
}

.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  margin-bottom: 4px;
  font-weight: 500;
}

.form-group input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 14px;
}

.error-message {
  color: #d32f2f;
  font-size: 14px;
  margin-bottom: 16px;
}

.modal-buttons {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

/* Buttons */
.btn {
  padding: 8px 16px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.btn-primary {
  background: var(--primary-color);
  color: white;
}

.btn-secondary {
  background: #e0e0e0;
  color: var(--text-color);
}

.btn-small {
  padding: 4px 8px;
  font-size: 12px;
}

.btn-icon {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 16px;
}

/* Layout */
#admin-app {
  display: grid;
  grid-template-columns: var(--sidebar-width) 4px 1fr;
  grid-template-rows: var(--toolbar-height) 1fr;
  height: 100vh;
}

/* Toolbar */
#admin-toolbar {
  grid-column: 1 / -1;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 16px;
  background: var(--primary-color);
  color: white;
}

.app-title {
  font-weight: 600;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

#session-name {
  font-size: 14px;
}

/* Sidebar */
#admin-sidebar {
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border-color);
  overflow-y: auto;
}

.sidebar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  font-weight: 600;
}

/* Tree */
#file-tree {
  padding: 8px 0;
}

.tree-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  cursor: pointer;
  user-select: none;
}

.tree-item:hover {
  background: #f0f0f0;
}

.tree-item.selected {
  background: var(--selected-bg);
}

.tree-icon {
  flex-shrink: 0;
}

.tree-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Resizer */
#sidebar-resizer {
  background: var(--border-color);
  cursor: col-resize;
}

/* Content */
#admin-content {
  background: var(--bg-color);
  padding: 16px;
  overflow-y: auto;
}

#content-placeholder {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  color: #999;
}

#file-viewer {
  background: white;
  padding: 24px;
  border-radius: 4px;
  max-width: 900px;
  margin: 0 auto;
}
```

### 4.4 app.js ë¼ìš°íŠ¸

```javascript
// /admin ë¼ìš°íŠ¸ ì¶”ê°€
app.get('/admin', (req, res) => {
  res.render('admin', { config: req.app.locals.config });
});

app.get('/admin/*', (req, res) => {
  res.render('admin', { config: req.app.locals.config });
});
```

---

## 5. í…ŒìŠ¤íŠ¸ ì„¹ì…˜

### 5.1 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Playwright)

#### TC-401: ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ ì‹œ ì¸ì¦ ëª¨ë‹¬

```
Given: ì„¸ì…˜ ì—†ìŒ
When: /admin ì ‘ì†
Then: ì¸ì¦ ëª¨ë‹¬ í‘œì‹œë¨
And: API Key ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤
```

#### TC-402: ìœ íš¨í•œ API í‚¤ë¡œ ë¡œê·¸ì¸

```
Given: ì¸ì¦ ëª¨ë‹¬ í‘œì‹œë¨
When: ìœ íš¨í•œ API í‚¤ ì…ë ¥ í›„ Login í´ë¦­
Then: ëª¨ë‹¬ ë‹«í˜
And: íŒŒì¼ íŠ¸ë¦¬ í‘œì‹œë¨
And: ì„¸ì…˜ ì´ë¦„ íˆ´ë°”ì— í‘œì‹œ
```

#### TC-403: ì˜ëª»ëœ API í‚¤ë¡œ ë¡œê·¸ì¸

```
Given: ì¸ì¦ ëª¨ë‹¬ í‘œì‹œë¨
When: ì˜ëª»ëœ API í‚¤ ì…ë ¥ í›„ Login í´ë¦­
Then: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
And: ëª¨ë‹¬ ìœ ì§€
```

#### TC-404: íŒŒì¼ íŠ¸ë¦¬ í‘œì‹œ

```
Given: ë¡œê·¸ì¸ë¨
Then: íŒŒì¼ íŠ¸ë¦¬ì— ëª¨ë“  íŒŒì¼ íƒ€ì… í‘œì‹œ
And: í´ë”ì— ğŸ“ ì•„ì´ì½˜
And: .md íŒŒì¼ì— ğŸ“„ ì•„ì´ì½˜
And: ì´ë¯¸ì§€ íŒŒì¼ì— ğŸ–¼ï¸ ì•„ì´ì½˜
```

#### TC-405: í´ë” í™•ì¥/ì¶•ì†Œ

```
Given: íŒŒì¼ íŠ¸ë¦¬ í‘œì‹œë¨
When: í´ë” í´ë¦­
Then: í´ë” í™•ì¥/ì¶•ì†Œ
And: ì•„ì´ì½˜ ğŸ“ â†” ğŸ“‚ ë³€ê²½
```

#### TC-406: íŒŒì¼ ì„ íƒ ë° ë¯¸ë¦¬ë³´ê¸°

```
Given: íŒŒì¼ íŠ¸ë¦¬ í‘œì‹œë¨
When: .md íŒŒì¼ í´ë¦­
Then: íŒŒì¼ ì„ íƒ ìƒíƒœ í•˜ì´ë¼ì´íŠ¸
And: ìš°ì¸¡ì— ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ í‘œì‹œ
```

#### TC-407: URL ë™ê¸°í™”

```
Given: /admin ì ‘ì† í›„ ë¡œê·¸ì¸
When: /docs/intro.md íŒŒì¼ ì„ íƒ
Then: URLì´ /admin/docs/intro.mdë¡œ ë³€ê²½
```

#### TC-408: ë¡œê·¸ì•„ì›ƒ

```
Given: ë¡œê·¸ì¸ë¨
When: Logout ë²„íŠ¼ í´ë¦­
Then: ì¸ì¦ ëª¨ë‹¬ í‘œì‹œë¨
And: ì„¸ì…˜ ì¢…ë£Œë¨
```

### 5.2 í…ŒìŠ¤íŠ¸ ì½”ë“œ êµ¬ì¡°

```javascript
// test/admin-frontend.spec.js
const { test, expect } = require('@playwright/test');

test.describe('Admin Frontend', () => {
  test('should show auth modal on /admin', async ({ page }) => { /* TC-401 */ });
  test('should login with valid key', async ({ page }) => { /* TC-402 */ });
  test('should show error for invalid key', async ({ page }) => { /* TC-403 */ });
  test('should display file tree with icons', async ({ page }) => { /* TC-404 */ });
  test('should expand/collapse folders', async ({ page }) => { /* TC-405 */ });
  test('should select and preview file', async ({ page }) => { /* TC-406 */ });
  test('should sync URL with selection', async ({ page }) => { /* TC-407 */ });
  test('should logout', async ({ page }) => { /* TC-408 */ });
});
```

---

## 6. íšŒê·€í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¡°ê±´

- [ ] Phase 1, 2 í…ŒìŠ¤íŠ¸ ì „ì²´
- [ ] ê¸°ì¡´ ì¼ë°˜ ëª¨ë“œ í…ŒìŠ¤íŠ¸ (ì˜í–¥ ì—†ìŒ í™•ì¸)
- [ ] ì‹ ê·œ Admin Frontend í…ŒìŠ¤íŠ¸ ì „ì²´

---

## 7. ì™„ë£Œ ì¡°ê±´

- [ ] ëª¨ë“  êµ¬í˜„ í•­ëª© ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ (TASK-401 ~ TASK-417)
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ í†µê³¼ (TC-401 ~ TC-408)
- [ ] Chrome, Firefox, Edgeì—ì„œ ë™ì‘ í™•ì¸
- [ ] íšŒê·€í…ŒìŠ¤íŠ¸ 100% í†µê³¼

---

*Phase 4 ë¬¸ì„œ ë*
